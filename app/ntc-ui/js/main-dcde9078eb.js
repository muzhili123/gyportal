var size=void 0,lang=localStorage.getItem("lang")||"",getPicNewsData=function(n){return axios.get($baseUrl+"/news/getLatestByType",{params:{count:n,type:"图片新闻"}})},getBanner=function(){return axios.get($baseUrl+"/news/getBanners")},getNewsData=function(n){return axios.get($baseUrl+"/news/getLatestByType",{params:{count:n,type:"中心动态"}})},getNoticeData=function(n){return axios.get($baseUrl+"/news/getLatestByType",{params:{count:n,type:"通知公告"}})},getInfoData=function(n){return axios.get($baseUrl+"/news/getLatestByType",{params:{count:n,type:"行业资讯"}})},getHots=function(){return axios.get($baseUrl+"/news/getHotNews")},getHospitalList=function(){return axios.get($baseUrl+"/hospital/getStickHospital")},render=function(n,e){$(n).html(""),$(n).append(e)},spliceContent=function(n,e){return n.length>e?n.slice(0,e)+"...":n},filters=function(n){if(n)return n=(n=(n=n.replace(/<[^>]+>|&[^>]+;/g,"").trim()).replace(/\s{2,}/g,"")).replace(/\\n/g,"")},bannerStart=function(){var n=$(".banner").width()/2;$(".banner").height(n),$($(".banner .img").children()[0]).show().siblings().hide(),$($(".banner .nums").children()[0]).addClass("act");var a=1;setInterval(function(){$($(".banner .img").children()[a%size]).fadeIn(1e3).siblings().fadeOut(1e3),$($(".banner .nums").children()[a%size]).addClass("act").siblings().removeClass("act"),a++},5e3),$(".banner .nums>li").click(function(n){var e=$(n.target),t=e[0].tabIndex;a=t,e.addClass("act").siblings().removeClass("act"),$($(".banner .img").children()[t-1]).fadeIn().siblings().fadeOut()})},getPicNews=function(){getBanner().then(function(n){var e=n.data.data;if(e.length){var t="",a="";size=n.data.data.length,e.forEach(function(n){t+='<li>\n        <a href="'+("en"===lang?"en":"")+"/page/news/pic-news-article/?id="+n.id+'">\n          <img src="http://www.htcc.org.cn'+n.url+'" alt="">\n          <p>'+n.title+"</p>\n        </a>\n      </li>"});for(var i=1;i<=size;i+=1)a+='<li tabIndex="'+i+'"></li>';render("#img",t),render("#nums",a),bannerStart()}})},getNews=function(){getNewsData(6).then(function(n){var e=n.data.data,t="";e.forEach(function(n){n.image?t+='<div class="news-card">\n          <a href="'+("en"===lang?"en":"")+"/page/news/news-article/?id="+n.id+'">\n            <div class="pic">\n              <img src="http://www.htcc.org.cn'+n.image+'">\n            </div>\n            <div class="content">\n              <h3 class="title">'+n.title+'</h3>\n              <h4 class="text">'+filters(n.tabloid)+'</h4>\n              <div class="footer-text">\n                <span>'+n.update_date+'</span>\n                <span class="news-type">'+n.type+"</span>\n              </div>\n            </div>\n          </a>\n        </div>":t+='<div class="news-card no-img">\n          <a href="'+("en"===lang?"en":"")+"/page/news/news-article/?id="+n.id+'">\n            <div class="content">\n              <h3 class="title">'+n.title+'</h3>\n              <h4 class="text">'+n.tabloid+'</h4>\n              <div class="footer-text">\n                <span>'+n.update_date+'</span>\n                <span class="news-type">'+n.type+"</span>\n              </div>\n            </div>\n          </a>\n        </div>"}),render("#news",t)})},getNotice=function(){getNoticeData(6).then(function(n){var e=n.data.data,t="";e.forEach(function(n){t+='<li>\n        <a href="'+("en"===lang?"en":"")+"/page/news/notice-article/?id="+n.id+'">\n          <span class="notice-title">'+spliceContent(n.title,23)+'</span>\n          <span class="date">['+n.update_date.split(" ")[0]+"]</span>\n        </a>\n      </li>"}),render("#notices",t)})},getInfos=function(){getInfoData(3).then(function(n){var e=n.data.data,t="";e.forEach(function(n){t+='<div class="info-item">\n        <a href="'+("en"===lang?"en":"")+"/page/news/infos-article/?id="+n.id+'">\n          <h2 class="title">'+n.title+'</h2>\n          <h5 class="text">'+filters(n.tabloid)+"</h5>\n          <span>"+n.update_date+"</span>\n        </a>\n      </div>"}),render("#infos",t)})},getHospitals=function(){getHospitalList().then(function(n){var e=n.data.data,t="";"en"===localStorage.getItem("lang")?e.forEach(function(n){t+='<div class="hospital-logo">\n          <a href="'+n.url+'" target="_blank">\n            <img src="http://www.htcc.org.cn'+n.image+'" alt="">\n            <div class="logo-text">\n              <span>'+n.nameEn+"</span>\n            </div>\n          </a>\n        </div>"}):e.forEach(function(n){t+='<div class="hospital-logo">\n          <a href="'+n.url+'" target="_blank">\n            <img src="http://www.htcc.org.cn'+n.image+'" alt="">\n            <div class="logo-text">\n              <span>'+n.name+"</span>\n            </div>\n          </a>\n        </div>"}),render("#logos",t)})},renderHotNews=function(){getHots().then(function(n){var e=n.data.data,t="";switch(e.type){case"中心动态":t="news-article";break;case"图片新闻":t="pic-news-article";break;case"通知公告":t="notice-article";break;case"行业资讯":t="infos-article"}var a='<a href="'+("en"===lang?"en":"")+"/page/news/"+t+"/?id="+e.id+'">\n      '+e.title+"\n    </a>";render("#hotNews",a)})},setBannerWidth=function(){var n=window.screen.width,e=$(window).width(),t=n<e?n:e;$(".banner").width(t)},setBannerHeight=function(){var n=$(".banner").width()/2;$(".banner").height(n)};$(function(){setBannerWidth(),getPicNews(),getNews(),renderHotNews(),getNotice(),getInfos(),getHospitals(),$(window).resize(function(){setBannerWidth(),setBannerHeight()})});
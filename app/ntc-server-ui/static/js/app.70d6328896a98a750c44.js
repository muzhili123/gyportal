webpackJsonp([1],{"1zRZ":function(t,e){},"3ntp":function(t,e){},"3wKW":function(t,e){},D9hl:function(t,e){},FBB4:function(t,e){},Hb0K:function(t,e){},"IYu+":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("m7aY"),a("tqWA"),a("lMgl"),a("D9hl"),a("3ntp");var i=a("rVsN"),s=a.n(i),n=a("aozt"),l=a.n(n),o="http://htcc.org.cn:7044/",r=a("6iV/"),c=a.n(r),u=function(t){return("ntc_"+t).toUpperCase()},d=u("token"),p=u("lang"),m={get token(){return localStorage.getItem(d)},set token(t){localStorage.setItem(d,t)},get lang(){return localStorage.getItem(p)},set lang(t){localStorage.setItem(p,t)},clearUserinfo:function(){[d].forEach(function(t){localStorage.removeItem(t)})},remove:function(t){localStorage.removeItem("ntc_"+t)},clear:function(){localStorage.clear()}},h=function(t){y.defaults.headers.common.Authorization="Bearer "+t,y.defaults.headers.common["Content-Type"]="application/json"},f=function(t,e){return y.post("/login",c.a.stringify({username:t,password:e})).then(function(t){var e=t.data.token;return h(e),m.token=e,s.a.resolve(t)})},g=function(){m.clear(),window.location.href=window.location.origin+"/#/login"},v=h,b=function(){return y.get("/user/getCurrentUser")},_=a("9ab0"),w=a.n(_);l.a.defaults.baseURL=o,l.a.defaults.headers.common["Content-Language"]=m.lang||"",l.a.interceptors.request.use(function(t){return t},function(t){return s.a.reject(t.request)}),l.a.interceptors.response.use(function(t){var e=t&&t.data.status,a=t&&t.data.msg;return"200"!==e?(a&&_.Message.warning({message:a}),s.a.reject(t)):s.a.resolve(t)},function(t){if(401===t.response.status)return g(),void _.Message.error({message:"登录令牌已失效，请重新登录！",center:!0});var e=t.response.data.msg||t.response.data.message;return e&&_.Message.error({message:e}),s.a.reject(t.response)});var y=l.a,k=a("IvJb"),C=a("aiqZ"),x=a.n(C),$=a("crgx"),N=a.n($),E=a("2cm+"),z=a("k1JV"),L=a.n(z),S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var D=a("C7Lr")({name:"App"},S,!1,function(t){a("QTam")},null,null).exports,T=a("zO6J"),F={name:"login",data:function(){return{user:{username:"",password:""},loginFail:!1,refresh:"",isLoging:!1}},methods:{shake:function(){var t=this;this.loginFail=!0,setTimeout(function(){t.loginFail=!1},400)},toFocus:function(){this.user.username?""===this.user.password&&this.$refs.pwd.focus():this.$refs.user.focus()},login:function(){var t=this,e=this.user.username,a=this.user.password;e&&a?(this.isLoging=!0,f(e,a).then(function(){t.isLoging=!1,t.$notify({title:"登录成功",message:"欢迎使用，国远官网管理系统",type:"success"}),t.$router.push("/")}).catch(function(e){t.shake(),t.isLoging=!1,t.$notify({title:"登录失败",message:""+e.data.msg,type:"error"})})):this.toFocus()}}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"login-box"},[a("div",{staticClass:"login-container",class:{shake:t.loginFail}},[t._m(0),t._v(" "),a("div",{staticClass:"content login-form",attrs:{autocomplete:"off"}},[a("div",{staticClass:"form-group"},[a("span",[t._v("用户名")]),t._v(" "),a("el-input",{ref:"user",attrs:{size:"mini",autofocus:"",placeholder:"请输入用户名"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null}},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("span",[t._v("密码")]),t._v(" "),a("el-input",{ref:"pwd",attrs:{type:"password",size:"mini",placeholder:"请输入密码"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null}},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),t._v(" "),t.isLoging?a("el-button",{staticClass:"login-btn",attrs:{icon:"el-icon-loading",type:"primary",disabled:""}},[t._v("正在登录...")]):a("el-button",{staticClass:"login-btn",attrs:{disabled:t.isLoging,type:"primary"},on:{click:t.login}},[t._v("登录")])],1)])]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div"),this._v(" "),e("h2",{staticClass:"platname"},[this._v("国家远程医疗中心")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[e("span",[this._v("NTC | 国家远程医疗中心 - 管理系统")])])}]};var U=a("C7Lr")(F,A,!1,function(t){a("IYu+")},"data-v-dfb199fc",null).exports,I=["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],R={name:"header-bar",data:function(){return{time:"",weekday:"",minute:"",username:"",language:""}},methods:{getUser:function(){var t=this;b().then(function(e){var a=e.data.data;t.username=a.username,window.USER_NAME=a.username})},logout:function(){var t=this;this.$confirm("立即注销用户？","退出",{confirmButtonText:"注销",cancelButtonText:"取消",type:"warning"}).then(function(){setTimeout(function(){return g()},300),t.$notify.success({title:"成功",message:"注销成功"})})},cLang:function(t){var e="中文版";"en"===t&&(e="英文版"),this.$confirm("切换至"+e+"管理页面？","提示",{type:"warning"}).then(function(){m.lang=t,window.location.reload()})},getTime:function(){var t=new Date;this.time=t.toTimeString().split(" ")[0].substring(0,5),this.weekday=I[t.getDay()]}},watch:{minute:function(){this.getTime()}},created:function(){var t=this;this.language=m.lang||"cn",this.minute=(new Date).getMinutes(),setInterval(function(){t.minute=(new Date).getMinutes()},1e3),this.getUser()}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header",staticStyle:{height:"50px"}},[t._m(0),t._v(" "),a("div",{staticClass:"date"},[a("span",{staticClass:"time"},[t._v(t._s(t.time))]),t._v(" "),a("span",{staticClass:"weekday"},[t._v(t._s(t.weekday))])]),t._v(" "),a("div",{staticClass:"userinfo"},["en"===t.language?a("el-button",{staticClass:"p-none mr-md",attrs:{type:"text",size:"lg"},on:{click:function(e){t.cLang("cn")}}},[t._v("EN")]):a("el-button",{staticClass:"p-none mr-md",attrs:{type:"text",size:"lg"},on:{click:function(e){t.cLang("en")}}},[t._v("CN")]),t._v(" "),a("span",{directives:[{name:"popover",rawName:"v-popover:info",arg:"info"}],staticClass:"welcome"},[t._v("您好，"),a("strong",[t._v(t._s(t.username))])]),t._v(" "),a("span",{staticClass:"logout",on:{click:t.logout}},[a("i",{staticClass:"el-icon-evm-exit small-text fb",attrs:{title:"登出"}}),t._v(" "),a("span",{staticClass:"small-text fb"},[t._v("注销")])])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tenant"},[e("span",{staticClass:"primary"},[this._v("国家远程医疗中心")])])}]};var H=a("C7Lr")(R,V,!1,function(t){a("h8no")},"data-v-21e9d584",null).exports,B=a("4YfN"),M=a.n(B),O={name:"nav-main",data:function(){return{model:[{id:0,level:1,code:"DASHBOARD",name:"看板",sort:0},{id:"01",level:2,code:"DATA_DASHBOARD",pcode:"DASHBOARD",name:"数据看板",sort:1,url:"/dashboard"},{id:1,level:1,code:"CONTENTS",name:"内容管理",sort:1},{id:11,level:2,icon:"el-icon-tickets",code:"STATIC_MANAGER",pcode:"CONTENTS",name:"静态内容",sort:1,url:"/static"},{id:12,level:2,icon:"el-icon-tickets",code:"NEWS_MANAGER",pcode:"CONTENTS",name:"新闻中心",sort:2,url:"/news"},{id:13,level:2,icon:"el-icon-tickets",code:"LINKS_MANAGER",pcode:"CONTENTS",name:"友情链接",sort:3,url:"/links"},{id:14,level:2,icon:"el-icon-tickets",code:"HOSPITAL_MANAGER",pcode:"CONTENTS",name:"协同医院",sort:4,url:"/hospital"},{id:2,level:1,code:"SOURCE",name:"资源管理",sort:2},{id:22,level:2,icon:"el-icon-picture-outline",code:"IMAGES",pcode:"SOURCE",name:"静态图片自定义",sort:1,url:"/customization"}],menus:""}},methods:{format:function(){var t={};this.model.forEach(function(e){1===e.level?t[e.code]||(t[e.code]=M()({},e,{children:[]})):2===e.level&&(t[e.pcode]?t[e.pcode].children.push(e):t[e.pcode]={children:[]})}),this.menus=t},getMenus:function(){this.format()}},created:function(){this.getMenus()}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"nav"},[t._m(0),t._v(" "),a("div",{staticClass:"menu-group"},[t._l(t.menus,function(e){return[a("h6",{key:e.code,staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),t._l(e.children,function(e){return a("router-link",{key:e.code,staticClass:"menu-item",attrs:{tag:"div",to:e.url}},[a("i",{class:e.icon}),t._v("\n        "+t._s(e.name)+"\n      ")])})]})],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"product-title"},[e("span",{staticClass:"fb"},[this._v("管理系统")])])}]};var Z={name:"main-page",data:function(){return{}},computed:{},components:{HeaderBar:H,NavMain:a("C7Lr")(O,q,!1,function(t){a("Hb0K")},"data-v-7597a2e0",null).exports}},P={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",{staticClass:"page"},[e("el-aside",{attrs:{width:"200px"}},[e("nav-main",{staticClass:"nav-main"})],1),this._v(" "),e("el-container",[e("el-header",{staticStyle:{height:"50px"}},[e("header-bar")],1),this._v(" "),e("el-main",[e("router-view")],1)],1)],1)},staticRenderFns:[]};var j=a("C7Lr")(Z,P,!1,function(t){a("UAGZ")},null,null).exports,Y=function(){return l.a.get("/getVisitorCount?group=day")},J=function(){return l.a.get("/getVisitorCount?group=month")},G={name:"dashboard",data:function(){return{dayNumber:0,monthNumber:0,loading:!1}},methods:{getData:function(){var t=this;Y().then(function(e){"200"===e.data.status&&(t.dayNumber=e.data.data||0)}),J().then(function(e){"200"===e.data.status&&(t.monthNumber=e.data.data||0)})}},created:function(){this.getData()}},K={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-section"},[t._m(0),t._v(" "),a("div",{staticClass:"setting-content"},[a("div",{staticClass:"cards"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("今日访问量")])]),t._v(" "),a("div",{staticClass:"text item"},[a("h1",{staticStyle:{color:"#22c36a"}},[t._v(t._s(t.dayNumber))])])]),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("本月访问量")])]),t._v(" "),a("div",{staticClass:"text item"},[a("h1",{staticStyle:{color:"#22c36a"}},[t._v(t._s(t.monthNumber))])])])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"setting-title inline-center"},[e("span",[this._v("数 据 统 计")])])}]};var W=a("C7Lr")(G,K,!1,function(t){a("YmYC")},"data-v-5eb8ab4a",null).exports,Q=function(t){return y.post("/news/uploadImageByBase64",{imgSrc:t})},X=function(t){return y.post("/resource/replacePicture",t)},tt=function(){return y.get("/resource/findStaticArticle")},et=function(t){return y.get("/resource/getFriendLinkById?id="+t)},at=function(){return y.get("/resource/findFriendLink",{headers:{"Content-Language":"cn"}})},it=function(t,e,a){return y.post("/resource/insertFriendLink",{name:t,nameEn:e,url:a})},st=function(t,e,a,i){return y.post("/resource/updateFriendLink",{id:t,name:e,nameEn:a,url:i})},nt=function(t){return y.post("/resource/deleteFriendLink?id="+t)},lt=function(){return y.get("/hospital/findHospitalAddressByName?addressName=")},ot={name:"static",data:function(){return{list:[],loading:!1,dialogVisible:!1,id:""}},methods:{getNewsData:function(){var t=this;this.loading=!0,tt().then(function(e){var a=e.data.data;t.list=a,t.loading=!1}).catch(function(){t.loading=!1})},view:function(t,e){window.open("http://htcc.org.cn"+t,"_blank")},edit:function(t){this.$router.push({name:"static-edit",params:{id:t}})}},created:function(){this.getNewsData()}},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-section"},[t._m(0),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"setting-content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"primary",attrs:{type:"text"},on:{click:function(a){t.view(e.row.url,e.row.id)}}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"85"}}),t._v(" "),a("el-table-column",{attrs:{prop:"update_date",label:"最后修改时间",sortable:"",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"page_view",label:"浏览量",sortable:"",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.edit(e.row.id)}}},[t._v("编辑")])]}}])})],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"setting-title"},[e("span",[this._v("静态内容")])])}]};var ct=a("C7Lr")(ot,rt,!1,function(t){a("u176")},"data-v-0e219ecc",null).exports,ut={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-button",{staticClass:"p-none",attrs:{type:"text",size:"medium",icon:"el-icon-arrow-left"},on:{click:function(e){t.$router.back()}}},[t._t("default",[t._v("返回")])],2)},staticRenderFns:[]},dt=a("C7Lr")({name:"back-btn"},ut,!1,null,null,null).exports,pt=function(t,e,a){return y.get("/news/findAllByType",{params:{pageSize:t,pageNum:e,type:a}})},mt=function(t){return y.get("/news/getNewsById",{params:{id:t}})},ht=function(t,e,a,i,s){return y.post("/news/insertNews",{title:t,type:e,tabloid:a,content:i,attachments:s})},ft=function(t,e,a,i,s,n){return y.post("/news/updateNews",{id:t,title:e,type:a,tabloid:i,content:s,attachments:n})},gt=function(t,e,a){return y.post("/news/updateNewsTime?id="+t+"&publishDate="+e+"&updateDate="+a)},vt=function(t){return y.post("/news/deleteNews",{groupId:t})},bt=function(t){return y.get("/news/setHotNews",{params:{id:t}})},_t=function(t){return y.post("/news/uploadBanner",t)},wt=function(t){return y.post("/news/removeBanner",c.a.stringify({id:t}))},yt=/<img\ssrc=[\'\"]data:image.*?(?:>|\/>)/gi,kt=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,Ct=function(t){return t.replace(/<img\ssrc=[\'\"]/gi,'<img src="http://htcc.org.cn')},xt=function(t,e){for(var a=(t=(t=t.replace(/http:\/\/htcc\.org\.cn/gi,"")).replace(/<img\ssrc=[\'\"]data:image.*?(?:>|\/>)/gi,"|")).split("|"),i=e.length,s=a[0],n=0;n<i;n+=1)s+='<img src="'+e[n]+'">'+a[n+1];return s},$t=function(t){var e=function(t){for(var e=t.match(yt)||[],a=e.length,i=[],s=0;s<a;s+=1)i.push(e[s].match(kt)[1]);return i}(t);return l.a.all(function(t,e){for(var a=t.length,i=[],s=0;s<a;s+=1)i.push(e(t[s]));return i}(e,Q))},Nt={name:"static-edit",data:function(){return{news:{title:"",tabloid:"",content:"",attachments:""},fileList:[],actions:o+"attachment/asyncUploadFile",editorOption:{},loading:!1}},computed:{headers:function(){return{Authorization:l.a.defaults.headers.common.Authorization}}},methods:{getNews:function(t){var e=this;mt(t).then(function(t){var a=t.data.data;a.content=Ct(a.content),e.news=a,e.fileList=e.news.attachments})},editNews:function(){var t=this;this.loading=!0;var e=this.news,a=e.id,i=e.title,s=e.tabloid,n=e.content,o=this.getFileList(this.fileList);i?n?$t(n).then(l.a.spread(function(){for(var e=arguments.length,l=Array(e),r=0;r<e;r++)l[r]=arguments[r];var c=[];l.map(function(t){c.push(t.data.data.url)});var u='<div class="ql-editor">'+xt(n,c)+"</div>";ft(a,i,"静态",s,u,o).then(function(e){t.loading=!1,t.$message.success("更新成功！"),t.$router.back()}).catch(function(){t.loading=!1})})).catch(function(){t.loading=!1}):this.$message.warning("请输入内容！内容不可为空！"):this.$message.warning("请填写标题！(1 - 50字)")},handleChange:function(t,e){this.fileList=e.slice(-10)},handleRemove:function(t,e){this.fileList=e},getFileList:function(t){var e=[];return t.map(function(t){t.response?e.push(t.response.data[0]):e.push(t)}),e}},created:function(){var t=parseInt(this.$route.params.id,10);this.getNews(t)},components:{BackBtn:dt}},Et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"setting-section"},[a("div",{staticClass:"setting-title"},[a("div",{staticClass:"flexbox-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{name:"static"}}},[t._v("静态内容")]),t._v(" "),a("el-breadcrumb-item",[t._v("编辑内容")]),t._v(" "),a("el-breadcrumb-item",[t._v(t._s(t.news.title))])],1),t._v(" "),a("back-btn",[t._v("返回")])],1)]),t._v(" "),a("div",{staticClass:"setting-content"},[a("el-form",{ref:"news",attrs:{model:t.news,"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.news.title,callback:function(e){t.$set(t.news,"title",e)},expression:"news.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"摘要"}},[a("el-input",{attrs:{type:"textarea",size:"mini",rows:"3"},model:{value:t.news.tabloid,callback:function(e){t.$set(t.news,"tabloid",e)},expression:"news.tabloid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"附件"}},[a("el-upload",{ref:"upload",staticClass:"upload",attrs:{multiple:"",action:t.actions,headers:t.headers,limit:10,"on-change":t.handleChange,"on-remove":t.handleRemove,"file-list":t.fileList}},[t.fileList.length?a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("继续添加附件")]):a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("添加附件")]),t._v(" "),a("span",{staticClass:"small-text ml-md",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[t._v("* 支持多文件上传！(最多 10个, 最大 100M!)")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"内容"}},[a("div",{staticStyle:{height:"500px"}},[a("quill-editor",{ref:"quillEditor",staticStyle:{height:"85%"},attrs:{config:t.editorOption},model:{value:t.news.content,callback:function(e){t.$set(t.news,"content",e)},expression:"news.content"}})],1)]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.editNews}},[t._v("立即更新")])],1)],1)],1)])},staticRenderFns:[]};var zt=a("C7Lr")(Nt,Et,!1,function(t){a("dC+V")},"data-v-4004c3bd",null).exports,Lt={name:"news",data:function(){return{newsList:[],pageNumber:1,count:0,showCheckbox:!1,pageSize:15,checked:[],status:"",loading:!1,dialogVisible:!1,editTimeDialogVisible:!1,newsId:"",newsTime:{publishDate:"",updateDate:""},id:"",username:""}},watch:{pageSize:function(t){this.getNewsData()},pageNumber:function(t){this.getNewsData()},status:function(){this.getNewsData()}},methods:{getType:function(t){switch(t){case"中心动态":return"news";case"通知公告":return"notice";case"行业资讯":return"infos";case"图片新闻":return"pic-news";case"技术专题":return"subject";default:return""}},getNewsData:function(){var t=this;this.loading=!0;var e=this.status,a=this.pageNumber,i=this.pageSize;pt(i,a,e).then(function(e){var a=e.data.data;t.newsList=a.content,t.count=a.totalElements,t.loading=!1}).catch(function(){t.loading=!1})},toggleCheckbox:function(){this.showCheckbox=!this.showCheckbox,this.checked=[]},setChecked:function(t){if(this.showCheckbox){var e=t.id,a=this.checked.indexOf(t.id);a<0?this.checked.push(e):this.checked.splice(a,1)}},batRemove:function(){var t=this.checked;this.remove("共"+t.length+"条",t)},create:function(){this.$router.push({name:"news-create"})},setHots:function(t){var e=this;this.$confirm("设为热点新闻","提示",{type:"warning"}).then(function(){bt(t).then(function(t){e.$message.success("热点新闻设置成功！"),e.getNewsData()})})},view:function(t,e){"技术专题"===t?window.open("http://htcc.org.cn/page/research/"+this.getType(t)+"-article/?id="+e,"_blank"):window.open("http://htcc.org.cn/page/news/"+this.getType(t)+"-article/?id="+e,"_blank")},edit:function(t){this.$router.push({name:"news-edit",params:{id:t}})},openEditTimeDialog:function(t){var e=this;this.newsId=t,mt(this.newsId).then(function(t){var a=t.data.data;e.newsTime.publishDate=a.publish_date,e.newsTime.updateDate=a.update_date,e.editTimeDialogVisible=!0})},editTime:function(){var t=this,e=this.newsId,a=this.newsTime.publishDate,i=this.newsTime.updateDate;gt(e,a,i).then(function(e){"200"===e.data.status&&(t.$message.success("时间修改成功！"),t.editTimeDialogVisible=!1)}).catch(function(){t.editTimeDialogVisible=!1})},remove:function(t,e){var a=this;this.$confirm('删除 "<strong>'+t.substring(0,15)+'..."</strong> 新闻',"提示：删除后不可恢复！",{type:"error",dangerouslyUseHTMLString:!0}).then(function(){vt(e).then(function(){a.$message.success("删除成功！"),a.getNewsData()})})},setBanner:function(t){t&&(this.id=t,this.dialogVisible=!0)},removeBanner:function(t,e){var a=this;e&&this.$confirm('关闭 "<strong>'+t.substring(0,15)+'..."</strong> 首页轮播',"提示：关闭后不可恢复，需重新上传",{type:"warning",dangerouslyUseHTMLString:!0}).then(function(){wt(e).then(function(){a.$message.success("已关闭此新闻首页轮播！"),a.getNewsData()})})},uploadFunc:function(t){var e=this;if(!(t.file.size/1024/1024<10))return this.$message.error("文件大小超过限制(10M)!"),void this.$refs.upload.clearFiles();var a=t.file,i=this.id,s=new FormData;s.append("id",i),s.append("image",a),_t(s).then(function(t){"200"===t.data.status?(e.$message.success(t.data.msg),e.dialogVisible=!1):(e.$message.warning(t.data.msg),e.$refs.upload.clearFiles())})},upload:function(){this.$refs.upload.submit()}},created:function(){var t=this;b().then(function(e){t.username=e.data.data.username}),this.getNewsData()}},St={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-section"},[t._m(0),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"setting-content"},[a("div",{staticClass:"hd-control"},[t.showCheckbox?a("div",{staticClass:"flexbox-around"},[a("el-button",{attrs:{type:"danger"},on:{click:t.batRemove}},[t._v("删除")]),t._v(" "),a("el-button",{staticClass:"ml-lg",attrs:{type:"info"},on:{click:t.toggleCheckbox}},[t._v("取消")])],1):a("div",{staticClass:"flexbox-between mb-md"},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("发布新闻")]),t._v(" "),a("el-button",{staticClass:"warning",attrs:{type:"text",icon:"el-icon-delete"},on:{click:t.toggleCheckbox}},[t._v("批量删除")])],1),t._v(" "),a("div",[a("span",{staticClass:"small-text"},[t._v("新闻类型：")]),a("br"),t._v(" "),a("el-radio-group",{attrs:{size:"mini"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("el-radio-button",{attrs:{label:""}},[a("span",[t._v("全部新闻")])]),t._v(" "),a("el-radio-button",{attrs:{label:"中心动态"}},[a("span",[t._v("中心动态")])]),t._v(" "),a("el-radio-button",{attrs:{label:"通知公告"}},[a("span",[t._v("通知公告")])]),t._v(" "),a("el-radio-button",{attrs:{label:"行业资讯"}},[a("span",[t._v("行业资讯")])]),t._v(" "),a("el-radio-button",{attrs:{label:"图片新闻"}},[a("span",[t._v("图片新闻")])]),t._v(" "),a("el-radio-button",{attrs:{label:"技术专题"}},[a("span",[t._v("技术专题")])])],1)],1)])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.newsList},on:{"row-click":t.setChecked}},[t.showCheckbox?[a("el-table-column",{attrs:{width:"30"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{attrs:{label:e.row.id},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})]}}])})]:t._e(),t._v(" "),a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.hot?a("el-tag",{attrs:{type:"warning"}},[t._v("HOT")]):t._e(),t._v(" "),t.showCheckbox?a("span",{attrs:{type:"text"}},[t._v(t._s(e.row.title))]):a("span",{staticClass:"primary",attrs:{type:"text"},on:{click:function(a){t.view(e.row.type,e.row.id)}}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"新闻类型",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"update_date",label:"最后修改时间",sortable:"",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"page_view",label:"浏览量",sortable:"",width:"80"}}),t._v(" "),"图片新闻"===t.status?a("el-table-column",{attrs:{label:"首页轮播",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.url?a("el-button",{staticStyle:{color:"#e6a23c"},attrs:{type:"text"},on:{click:function(a){t.setBanner(e.row.id)}}},[t._v("更新")]):a("el-button",{attrs:{type:"text"},on:{click:function(a){t.setBanner(e.row.id)}}},[t._v("开启")]),t._v(" "),e.row.url?a("el-button",{staticStyle:{color:"#909399"},attrs:{type:"text"},on:{click:function(a){t.removeBanner(e.row.title,e.row.id)}}},[t._v("关闭")]):t._e()]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"270"},scopedSlots:t._u([{key:"default",fn:function(e){return t.showCheckbox?void 0:[e.row.hot||"技术专题"===e.row.type?t._e():a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.setHots(e.row.id)}}},[t._v("HOT")]),t._v(" "),["admin","zdyfy"].includes(t.username)?a("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"mini"},on:{click:function(a){t.edit(e.row.id)}}},[t._v("编辑\n            "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){t.openEditTimeDialog(e.row.id)}}},[t._v("修改时间")])],1)],1):a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.edit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.remove(e.row.title,[e.row.id])}}},[t._v("删除")])]}}])})],2),t._v(" "),t.showCheckbox?t._e():a("el-pagination",{staticClass:"mt-sm",attrs:{layout:"total, sizes, prev, pager, next, jumper",total:t.count,"page-size":t.pageSize,"page-sizes":[10,15,20,30,50],"current-page":t.pageNumber},on:{"update:total":function(e){t.count=e},"update:pageSize":function(e){t.pageSize=e},"update:currentPage":function(e){t.pageNumber=e}}}),t._v(" "),a("el-dialog",{attrs:{title:"修改新闻时间",visible:t.editTimeDialogVisible,width:"400px"},on:{"update:visible":function(e){t.editTimeDialogVisible=e}}},[a("el-form",{attrs:{"label-width":"100px",model:t.newsTime}},[a("el-form-item",{attrs:{label:"发布时间"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择发布时间"},model:{value:t.newsTime.publishDate,callback:function(e){t.$set(t.newsTime,"publishDate",e)},expression:"newsTime.publishDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择更新时间"},model:{value:t.newsTime.updateDate,callback:function(e){t.$set(t.newsTime,"updateDate",e)},expression:"newsTime.updateDate"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editTimeDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editTime}},[t._v("立即修改")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"上传轮播图片（Banner）",visible:t.dialogVisible,width:"480px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-upload",{ref:"upload",staticClass:"upload",attrs:{drag:"",action:"string","auto-upload":!1,"http-request":t.uploadFunc}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("span",{staticStyle:{color:"red","line-height":"1.5"}},[t._v("* 仅图片 (比例 2:1，且分辨率不小于 1920*960), 大小不超过 10M！")]),t._v(" "),a("span",{staticStyle:{color:"red","line-height":"1.5"}},[t._v("* 上传封面后，首页将自动轮播此新闻 *")])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.upload}},[t._v("上 传")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"setting-title"},[e("span",[this._v("新闻中心")])])}]};var Dt=a("C7Lr")(Lt,St,!1,function(t){a("hJXt")},"data-v-1c2afaec",null).exports,Tt={name:"new-create",data:function(){return{news:{title:"",type:"",tabloid:"",content:""},fileList:[],actions:o+"attachment/asyncUploadFile",loading:!1}},computed:{headers:function(){return{Authorization:l.a.defaults.headers.common.Authorization}}},methods:{createNews:function(){var t=this,e=this.news,a=e.title,i=e.type,s=e.tabloid,n=e.content,o=this.getFileList(this.fileList);a?i?n?(this.loading=!0,$t(n).then(l.a.spread(function(){for(var e=arguments.length,l=Array(e),r=0;r<e;r++)l[r]=arguments[r];var c=[];l.map(function(t){c.push(t.data.data.url)});var u='<div class="ql-editor">'+xt(n,c)+"</div>";ht(a,i,s,u,o).then(function(e){t.loading=!1,t.$message.success("新闻成功发布！"),t.$router.back()}).catch(function(){t.loading=!1})})).catch(function(){t.loading=!1})):this.$message.warning("请输入新闻的内容！内容不可为空！"):this.$message.warning("请选择新闻的类型！"):this.$message.warning("请填写新闻标题！(1 - 50字)")},getType:function(t){switch(t){case"中心动态":return"news";case"通知公告":return"notice";case"行业资讯":return"infos";case"图片新闻":return"pic-news";case"技术专题":return"subject";default:return""}},view:function(t,e){var a="";"en"===m.lang&&(a="/en"),"技术专题"===t?window.open("http://htcc.org.cn"+a+"/page/research/"+this.getType(t)+"-article/?id="+e,"_blank"):window.open("http://htcc.org.cn"+a+"/page/news/"+this.getType(t)+"-article/?id="+e,"_blank")},preview:function(){var t=this,e=this.news,a=e.title,i=e.type,s=e.tabloid,n=e.content,o=this.getFileList(this.fileList);a?i?n?(this.loading=!0,$t(n).then(l.a.spread(function(){for(var e=arguments.length,l=Array(e),r=0;r<e;r++)l[r]=arguments[r];var c=[];l.map(function(t){c.push(t.data.data.url)});var u='<div class="ql-editor">'+xt(n,c)+"</div>";ft(100010,a,i,s,u,o).then(function(e){t.loading=!1,t.view(i,100010)}).catch(function(){t.loading=!1})})).catch(function(){t.$message.success("预览失败，请稍后尝试！"),t.loading=!1})):this.$message.warning("请输入新闻的内容！内容不可为空！"):this.$message.warning("请选择新闻的类型！"):this.$message.warning("请填写新闻标题！(1 - 50字)")},handleChange:function(t,e){this.fileList=e.slice(-10)},getFileList:function(t){var e=[];return t.map(function(t){e.push(t.response.data[0])}),e}},created:function(){},components:{BackBtn:dt}},Ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"setting-section"},[a("div",{staticClass:"setting-title"},[a("div",{staticClass:"flexbox-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{name:"news"}}},[t._v("新闻中心管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("发布新闻")])],1),t._v(" "),a("back-btn",[t._v("返回")])],1)]),t._v(" "),a("div",{staticClass:"setting-content"},[a("el-form",{ref:"news",attrs:{model:t.news,"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"新闻标题"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.news.title,callback:function(e){t.$set(t.news,"title",e)},expression:"news.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新闻类型"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.news.type,callback:function(e){t.$set(t.news,"type",e)},expression:"news.type"}},[a("el-radio-button",{attrs:{label:"中心动态"}}),t._v(" "),a("el-radio-button",{attrs:{label:"通知公告"}}),t._v(" "),a("el-radio-button",{attrs:{label:"行业资讯"}}),t._v(" "),a("el-radio-button",{attrs:{label:"图片新闻"}}),t._v(" "),a("el-radio-button",{attrs:{label:"技术专题"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"新闻摘要"}},[a("el-input",{attrs:{type:"textarea",size:"mini",rows:"3"},model:{value:t.news.tabloid,callback:function(e){t.$set(t.news,"tabloid",e)},expression:"news.tabloid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"附件"}},[a("el-upload",{ref:"upload",staticClass:"upload",attrs:{multiple:"",action:t.actions,headers:t.headers,limit:10,"on-change":t.handleChange,"file-list":t.fileList}},[t.fileList.length?a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("继续添加附件")]):a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("添加附件")]),t._v(" "),a("span",{staticClass:"small-text ml-md",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[t._v("* 支持多文件上传！(最多 10个, 最大 100M!)")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"新闻内容"}},[a("div",{staticStyle:{height:"460px"}},[a("quill-editor",{ref:"quillEditor",staticStyle:{height:"85%"},model:{value:t.news.content,callback:function(e){t.$set(t.news,"content",e)},expression:"news.content"}})],1)]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.createNews}},[t._v("立即发布")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"medium"},on:{click:t.preview}},[t._v("预览")])],1)],1)],1)])},staticRenderFns:[]};var At=a("C7Lr")(Tt,Ft,!1,function(t){a("qcnN")},"data-v-5e0f81b8",null).exports,Ut={name:"new-edit",data:function(){return{news:{title:"",type:"",tabloid:"",content:"",attachments:""},fileList:[],actions:o+"attachment/asyncUploadFile",editorOption:{},loading:!1}},computed:{headers:function(){return{Authorization:l.a.defaults.headers.common.Authorization}}},methods:{getNews:function(t){var e=this;mt(t).then(function(t){var a=t.data.data;a.content=Ct(a.content),e.news=a,e.fileList=e.news.attachments})},editNews:function(){var t=this,e=this.news,a=e.id,i=e.title,s=e.type,n=e.tabloid,o=e.content,r=this.getFileList(this.fileList);i?s?o?(this.loading=!0,$t(o).then(l.a.spread(function(){for(var e=arguments.length,l=Array(e),c=0;c<e;c++)l[c]=arguments[c];var u=[];l.map(function(t){u.push(t.data.data.url)});var d='<div class="ql-editor">'+xt(o,u)+"</div>";ft(a,i,s,n,d,r).then(function(e){t.loading=!1,t.$message.success("新闻更新成功！"),t.$router.back()}).catch(function(){t.loading=!1})})).catch(function(){t.loading=!1})):this.$message.warning("请输入新闻的内容！内容不可为空！"):this.$message.warning("请选择新闻的类型！"):this.$message.warning("请填写新闻标题！(1 - 50字)")},getType:function(t){switch(t){case"中心动态":return"news";case"通知公告":return"notice";case"行业资讯":return"infos";case"图片新闻":return"pic-news";case"技术专题":return"subject";default:return""}},view:function(t,e){var a="";"en"===m.lang&&(a="/en"),"技术专题"===t?window.open("http://htcc.org.cn"+a+"/page/research/"+this.getType(t)+"-article/?id="+e,"_blank"):window.open("http://htcc.org.cn"+a+"/page/news/"+this.getType(t)+"-article/?id="+e,"_blank")},preview:function(){var t=this,e=this.news,a=e.title,i=e.type,s=e.tabloid,n=e.content,o=this.getFileList(this.fileList);a?i?n?(this.loading=!0,$t(n).then(l.a.spread(function(){for(var e=arguments.length,l=Array(e),r=0;r<e;r++)l[r]=arguments[r];var c=[];l.map(function(t){c.push(t.data.data.url)});var u='<div class="ql-editor">'+xt(n,c)+"</div>";ft(100010,a,i,s,u,o).then(function(e){t.loading=!1,t.view(i,100010)}).catch(function(){t.loading=!1})})).catch(function(){t.$message.success("预览失败，请稍后尝试！"),t.loading=!1})):this.$message.warning("请输入新闻的内容！内容不可为空！"):this.$message.warning("请选择新闻的类型！"):this.$message.warning("请填写新闻标题！(1 - 50字)")},handleChange:function(t,e){this.fileList=e.slice(-10)},handleRemove:function(t,e){this.fileList=e},getFileList:function(t){var e=[];return t.map(function(t){t.response?e.push(t.response.data[0]):e.push(t)}),e}},created:function(){var t=parseInt(this.$route.params.id,10);this.getNews(t)},components:{BackBtn:dt}},It={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"setting-section"},[a("div",{staticClass:"setting-title"},[a("div",{staticClass:"flexbox-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{name:"news"}}},[t._v("新闻中心管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("编辑新闻")]),t._v(" "),a("el-breadcrumb-item",[t._v(t._s(t.news.title))])],1),t._v(" "),a("back-btn",[t._v("返回")])],1)]),t._v(" "),a("div",{staticClass:"setting-content"},[a("el-form",{ref:"news",attrs:{model:t.news,"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"新闻标题"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.news.title,callback:function(e){t.$set(t.news,"title",e)},expression:"news.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新闻类型"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.news.type,callback:function(e){t.$set(t.news,"type",e)},expression:"news.type"}},[a("el-radio-button",{attrs:{label:"中心动态"}}),t._v(" "),a("el-radio-button",{attrs:{label:"通知公告"}}),t._v(" "),a("el-radio-button",{attrs:{label:"行业资讯"}}),t._v(" "),a("el-radio-button",{attrs:{label:"图片新闻"}}),t._v(" "),a("el-radio-button",{attrs:{label:"技术专题"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"新闻摘要"}},[a("el-input",{attrs:{type:"textarea",size:"mini",rows:"3"},model:{value:t.news.tabloid,callback:function(e){t.$set(t.news,"tabloid",e)},expression:"news.tabloid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"附件"}},[a("el-upload",{ref:"upload",staticClass:"upload",attrs:{multiple:"",action:t.actions,headers:t.headers,limit:10,"on-change":t.handleChange,"on-remove":t.handleRemove,"file-list":t.fileList}},[t.fileList.length?a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("继续添加附件")]):a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("添加附件")]),t._v(" "),a("span",{staticClass:"small-text ml-md",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[t._v("* 支持多文件上传！(最多 10个, 最大 100M!)")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"新闻内容"}},[a("div",{staticStyle:{height:"500px"}},[a("quill-editor",{ref:"quillEditor",staticStyle:{height:"85%"},attrs:{config:t.editorOption},model:{value:t.news.content,callback:function(e){t.$set(t.news,"content",e)},expression:"news.content"}})],1)]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.editNews}},[t._v("立即更新")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"medium"},on:{click:t.preview}},[t._v("预览")])],1)],1)],1)])},staticRenderFns:[]};var Rt=a("C7Lr")(Ut,It,!1,function(t){a("nKow")},"data-v-5448520a",null).exports,Vt={name:"links",data:function(){return{list:[],loading:!1,id:"",dialogVisible:!1,editDialogVisible:!1,link:{name:"",nameEn:"",url:""},oldlink:{id:"",name:"",nameEn:"",url:""}}},methods:{getLinks:function(){var t=this;this.loading=!0,at().then(function(e){var a=e.data.data;t.list=a,t.loading=!1}).catch(function(){t.loading=!1})},checkUrl:function(t){return!!t&&new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(t)},openDialogVisible:function(){this.link={name:"",url:"",nameEn:""},this.dialogVisible=!0},addLink:function(){var t=this,e=this.link.name,a=this.link.nameEn,i=this.link.url;this.checkUrl(i)?(e&&this.$message.warning("请输入链接名称和完整的Url"),it(e,a,i).then(function(e){"200"===e.data.status&&t.$message.success("新增成功！"),t.dialogVisible=!1,t.getLinks()})):this.$message.warning("请输入合法的链接地址！")},view:function(t){window.open(t,"_blank")},edit:function(t){var e=this;this.id=t,et(t).then(function(t){"200"===t.data.status&&(e.oldlink=t.data.data,e.editDialogVisible=!0)})},editSubmit:function(){var t=this,e=this.id,a=this.oldlink.name,i=this.oldlink.nameEn,s=this.oldlink.url;this.checkUrl(s)?(a&&this.$message.warning("请输入链接名称和完整的Url"),st(e,a,i,s).then(function(e){"200"===e.data.status&&t.$message.success("编辑成功！"),t.getLinks(),t.editDialogVisible=!1})):this.$message.warning("请输入合法的链接地址！")},deletes:function(t){var e=this;this.$confirm("确定删除链接？","提示",{type:"warning"}).then(function(){nt(t).then(function(t){"200"===t.data.status&&e.$message.success("删除成功！"),e.getLinks()})})}},created:function(){this.getLinks()}},Ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-section"},[t._m(0),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"setting-content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"primary",attrs:{type:"text"},on:{click:function(a){t.view(e.row.url)}}},[t._v(t._s(e.row.name))]),t._v(" "),e.row.nameEn?a("span",{staticClass:"small-text"},[a("br"),t._v(t._s(e.row.nameEn))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"url",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.edit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deletes(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"mt-md"},[a("el-button",{attrs:{type:"primary"},on:{click:t.openDialogVisible}},[t._v("新增链接")])],1),t._v(" "),a("el-dialog",{attrs:{title:"新增链接",visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{"label-width":"80px",model:t.link}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"输入链接名称"},model:{value:t.link.name,callback:function(e){t.$set(t.link,"name",e)},expression:"link.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"英文名称"}},[a("el-input",{attrs:{placeholder:"输入链接英文名称"},model:{value:t.link.nameEn,callback:function(e){t.$set(t.link,"nameEn",e)},expression:"link.nameEn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"例：http://www.baidu.com/"},model:{value:t.link.url,callback:function(e){t.$set(t.link,"url",e)},expression:"link.url"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addLink}},[t._v("新 增")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑链接",visible:t.editDialogVisible,width:"500px"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-form",{attrs:{"label-width":"80px",model:t.oldlink}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"输入链接名称"},model:{value:t.oldlink.name,callback:function(e){t.$set(t.oldlink,"name",e)},expression:"oldlink.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"英文名称"}},[a("el-input",{attrs:{placeholder:"输入链接英文名称"},model:{value:t.oldlink.nameEn,callback:function(e){t.$set(t.oldlink,"nameEn",e)},expression:"oldlink.nameEn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"例：http://www.baidu.com/"},model:{value:t.oldlink.url,callback:function(e){t.$set(t.oldlink,"url",e)},expression:"oldlink.url"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editSubmit}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"setting-title"},[e("span",[this._v("友情链接")])])}]};var Bt=a("C7Lr")(Vt,Ht,!1,function(t){a("nxpn"),a("xyiZ")},"data-v-f45f49a0",null).exports,Mt=function(t){return y.get("/hospital/findAllByPage",{params:{pageSize:4,pageNum:t},headers:{"Content-Language":"cn"}})},Ot=function(){return y.get("/hospital/getStickHospital")},qt=function(t){return y.get("/hospital/getHospitalById?id="+t)},Zt=function(t,e,a,i,s,n){return y.post("/hospital/insertHospital",{name:t,nameEn:e,image:a,url:i,addressName:s,addressNameEn:n})},Pt=function(t,e,a,i,s,n,l){return y.post("/hospital/updateHospital",{id:t,name:e,nameEn:a,image:i,url:s,addressName:n,addressNameEn:l})},jt=function(t){return y.post("/hospital/deleteHospital",{groupId:[t]})},Yt=function(t){return y.get("/hospital/setHospitalPriority?id="+t+"&priority=rise")},Jt=function(t){return y.get("/hospital/setHospitalPriority?id="+t+"&priority=drop")},Gt=function(t){return y.get("/hospital/setStickHospital?id="+t)},Kt={name:"customization",data:function(){return{baseUrl:"http://htcc.org.cn",lists:[],topList:[],count:0,pageNumber:1,dialogTableVisible:!1}},watch:{pageNumber:function(){this.getList()}},methods:{openNewpage:function(t){window.open(t,"_blank")},openDialog:function(){this.getTopList(),this.dialogTableVisible=!0},getList:function(){var t=this,e=this.pageNumber;Mt(e).then(function(e){"200"===e.data.status&&(t.lists=e.data.data.content,t.count=e.data.data.totalPages)})},getTopList:function(){var t=this;Ot().then(function(e){"200"===e.data.status&&(t.topList=e.data.data)})},moveUp:function(t){var e=this;Yt(t).then(function(t){"200"===t.data.status&&e.getTopList()})},moveDown:function(t){var e=this;Jt(t).then(function(t){"200"===t.data.status&&e.getTopList()})},showHome:function(t){var e=this;this.$confirm("首页显示此医院？","提示",{type:"warning"}).then(function(){Gt(t).then(function(t){"200"===t.data.status?e.$message.success("置顶成功！"):e.$message.warning(t.data.msg),e.getList()})})},removeHome:function(t,e){var a=this;e?Gt(t).then(function(t){"200"===t.data.status&&a.getTopList(),a.getList()}):this.$confirm("不在首页显示此医院？","提示",{type:"warning"}).then(function(){Gt(t).then(function(t){"200"===t.data.status&&a.$message.success("取消置顶成功！"),a.getList()})})},deletes:function(t){var e=this;this.$confirm("删除此医院？","提示",{type:"warning"}).then(function(){jt(t).then(function(t){"200"===t.data.status&&e.$message.success("删除成功！"),e.getList()})})},edit:function(t){this.$router.push({name:"hospital-edit",params:{id:t}})},create:function(){this.$router.push({name:"hospital-create"})}},created:function(){this.getList()}},Wt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-section"},[a("div",{staticClass:"setting-title flexbox-between"},[a("span",{staticClass:"pb-md"},[t._v("协同医院")]),t._v(" "),a("div",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:t.openDialog}},[t._v("查看首页医院")]),t._v(" "),a("el-button",{staticClass:"p-none pb-md",attrs:{type:"text",icon:"el-icon-plus",size:"small"},on:{click:t.create}},[t._v("新增")])],1)]),t._v(" "),a("div",{staticClass:"setting-content"},[t._l(t.lists,function(e){return a("div",{key:e.id},[a("h3",{staticClass:"title"},[t._v(t._s(e.address_name))]),t._v(" "),a("el-row",{staticClass:"pt-md"},t._l(e.hospitals,function(e){return a("el-col",{key:e.id,staticStyle:{padding:"0 10px"},attrs:{xs:12,sm:12,md:8,lg:4}},[a("el-card",{class:{show:e.stick},attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"img",attrs:{src:t.baseUrl+e.image}}),t._v(" "),a("p",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),a("p",{staticClass:"name-en"},[t._v(t._s(e.nameEn||"-"))]),t._v(" "),a("p",{staticClass:"small-text cursor",on:{click:function(a){t.openNewpage(e.url)}}},[t._v(t._s(e.url))]),t._v(" "),a("div",{staticClass:"content"},[e.stick?a("el-button",{staticClass:"danger button p-xs",attrs:{type:"text",size:"small"},on:{click:function(a){t.removeHome(e.id)}}},[t._v("取消显示")]):a("el-button",{staticClass:"button p-xs",attrs:{type:"text",size:"small"},on:{click:function(a){t.showHome(e.id)}}},[t._v("首页显示")])],1),t._v(" "),a("div",{staticClass:"content pb-xs"},[a("el-button",{staticClass:"button p-xs",attrs:{type:"text",size:"small"},on:{click:function(a){t.edit(e.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"danger button p-xs",attrs:{type:"text",size:"small"},on:{click:function(a){t.deletes(e.id)}}},[t._v("删除")])],1)])],1)}))],1)}),t._v(" "),a("el-pagination",{staticClass:"mt-sm",attrs:{layout:"prev, pager, next","current-page":t.pageNumber,"page-count":t.count},on:{"update:currentPage":function(e){t.pageNumber=e}}})],2),t._v(" "),a("el-dialog",{attrs:{title:"显示在首页的医院",visible:t.dialogTableVisible,width:"65%"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.topList}},[a("el-table-column",{attrs:{label:"医院"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))]),t._v(" "),e.row.nameEn?a("span",{staticClass:"small-text"},[a("br"),t._v(t._s(e.row.nameEn))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"url",label:"首页地址"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属城市",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.addressName)+" ")]),t._v(" "),e.row.addressNameEn?a("span",{staticClass:"small-text"},[t._v(t._s(e.row.addressNameEn))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index>0?a("el-button",{staticClass:"p-xs",on:{click:function(a){t.moveUp(e.row.id)}}},[t._v("⬆")]):t._e(),t._v(" "),e.$index<t.topList.length-1?a("el-button",{staticClass:"p-xs ml-none",on:{click:function(a){t.moveDown(e.row.id)}}},[t._v("⬇")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"移除",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"danger",attrs:{type:"text"},on:{click:function(a){t.removeHome(e.row.id,!0)}}},[t._v("移除")])]}}])})],1)],1)],1)},staticRenderFns:[]};var Qt=a("C7Lr")(Kt,Wt,!1,function(t){a("NQ/I"),a("1zRZ")},"data-v-7de08223",null).exports,Xt={name:"fast-select",props:["id"],data:function(){return{list:[],city:""}},methods:{cityChange:function(t){var e="";this.list.forEach(function(a){a.address_id===t&&(e=a)}),this.$emit("fastSelect",e)}},mounted:function(){var t=this;lt().then(function(e){"200"===e.data.status&&(t.list=e.data.data,t.city=t.id||t.list[0].address_id,t.cityChange(t.city))})}},te={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"small-text"},[t._v("快速选择：")]),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"快速选择城市",size:"mini"},on:{change:t.cityChange},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}},t._l(t.list,function(e){return a("el-option",{key:e.address_id,attrs:{label:e.address_name,value:e.address_id}},[a("span",[t._v(t._s(e.address_name))]),t._v(" "),a("span",{staticClass:"small-text"},[t._v(t._s(e.address_name_en))])])}))],1)},staticRenderFns:[]};var ee=a("C7Lr")(Xt,te,!1,function(t){a("3wKW")},"data-v-013a4cf7",null).exports,ae={name:"hospital-create",data:function(){return{data:{path:"logos"},hospital:{name:"",nameEn:"",image:"",url:"",addressName:"",addressNameEn:""},baseUrl:"http://www.htcc.org.cn",actions:o+"news/uploadBanner",isDefualt:!1}},computed:{headers:function(){return{Authorization:l.a.defaults.headers.common.Authorization}}},methods:{onSuccess:function(t){this.hospital.image=t.data,this.$refs.upload.$el.children[1].style.display="none"},handleRemove:function(){var t=this;setTimeout(function(){t.$refs.upload.$el.children[1].style.display="inline-block"},500)},getSelected:function(t){this.hospital.addressName=t.address_name,this.hospital.addressNameEn=t.address_name_en},create:function(){var t=this,e=this.hospital.name,a=this.hospital.nameEn,i=this.hospital.image,s=this.hospital.url,n=this.hospital.addressName,l=this.hospital.addressNameEn;e?n?Zt(e,a,i,s,n,l).then(function(e){"200"===e.data.status&&t.$message.success("新增成功！"),t.$router.back()}):this.$message.warning("请输入所属城市！"):this.$message.warning("请输入医院名称！")},defaultImage:function(){this.hospital.image="/u/cms/www/logo/cd169571-719f-4547-a99c-b45550d64978.png",this.isDefualt=!0},cancelDefaultImage:function(){this.hospital.image="",this.isDefualt=!1}},created:function(){},components:{BackBtn:dt,FastSelect:ee}},ie={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-section"},[a("div",{staticClass:"setting-title"},[a("div",{staticClass:"flexbox-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{name:"hospital"}}},[t._v("协同医院")]),t._v(" "),a("el-breadcrumb-item",[t._v("新增")])],1),t._v(" "),a("back-btn",[t._v("返回")])],1)]),t._v(" "),a("div",{staticClass:"setting-content"},[a("el-form",{ref:"news",attrs:{model:t.hospital,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"医院图标"}},[t.isDefualt?a("div",{staticClass:"imgDiv"},[a("img",{attrs:{src:t.baseUrl+t.hospital.image,alt:""}}),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:t.cancelDefaultImage}},[t._v("取消")])],1):a("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:t.actions,headers:t.headers,"on-success":t.onSuccess,data:t.data,name:"image","list-type":"picture-card","on-remove":t.handleRemove}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("p",{staticClass:"small-text",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[a("span",[t._v("* 图片尺寸 148*127")]),t._v(" "),t.isDefualt?t._e():a("el-button",{staticClass:"pl-xs",attrs:{type:"text",size:"small"},on:{click:t.defaultImage}},[t._v("默认图标")])],1)])],1),t._v(" "),a("el-form-item",{attrs:{label:"医院名称"}},[a("el-input",{attrs:{type:"text",size:"mini",placeholder:"郑州大学第一附属医院"},model:{value:t.hospital.name,callback:function(e){t.$set(t.hospital,"name",e)},expression:"hospital.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"医院英文名称"}},[a("el-input",{attrs:{type:"text",size:"mini",placeholder:"The First Affiliated Hospital of Zhengzhou University"},model:{value:t.hospital.nameEn,callback:function(e){t.$set(t.hospital,"nameEn",e)},expression:"hospital.nameEn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"首页地址"}},[a("el-input",{attrs:{type:"text",size:"mini",placeholder:"http://www.htcc.org.cn/"},model:{value:t.hospital.url,callback:function(e){t.$set(t.hospital,"url",e)},expression:"hospital.url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属城市"}},[a("fast-select",{on:{fastSelect:t.getSelected}}),t._v(" "),a("div",{staticClass:"input-col-2"},[a("el-input",{attrs:{type:"text",size:"mini",placeholder:"输入中文名称"},model:{value:t.hospital.addressName,callback:function(e){t.$set(t.hospital,"addressName",e)},expression:"hospital.addressName"}}),t._v(" "),a("el-input",{attrs:{type:"text",size:"mini",placeholder:"Enter English Name"},model:{value:t.hospital.addressNameEn,callback:function(e){t.$set(t.hospital,"addressNameEn",e)},expression:"hospital.addressNameEn"}})],1),t._v(" "),a("span",{staticClass:"tips"},[t._v("* 快速选择中，城市对应的英文若有错误，可以手动更改后提交以修正记录！")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.create}},[t._v("新增")])],1)],1)],1)])},staticRenderFns:[]};var se=a("C7Lr")(ae,ie,!1,function(t){a("ZYO2")},"data-v-04e32769",null).exports,ne={name:"hospital-edit",data:function(){return{data:{path:"logos"},isDefualt:!1,defualtUrl:"",hospital:{name:"",nameEn:"",image:"",url:"",addressName:"",addressNameEn:""},baseUrl:"http://www.htcc.org.cn",actions:o+"news/uploadBanner",isShow:!1}},computed:{headers:function(){return{Authorization:l.a.defaults.headers.common.Authorization}}},methods:{getHospitalInfo:function(){var t=this,e=parseInt(this.$route.params.id,10);qt(e).then(function(e){t.hospital=e.data.data,t.defaultUrl=t.hospital.image})},onSuccess:function(t){this.hospital.image=t.data,this.$refs.upload.$el.children[1].style.display="none"},handleRemove:function(){var t=this;setTimeout(function(){t.$refs.upload.$el.children[1].style.display="inline-block"},500)},getSelected:function(t){this.hospital.addressName=t.address_name,this.hospital.addressNameEn=t.address_name_en},edit:function(){var t=this;if(!this.isShow||this.hospital.image){var e=this.hospital.id,a=this.hospital.name,i=this.hospital.nameEn,s=this.hospital.image,n=this.hospital.url,l=this.hospital.addressName||"郑州",o=this.hospital.addressNameEn||"Zhengzhou";a?l?Pt(e,a,i,s,n,l,o).then(function(e){"200"===e.data.status&&t.$message.success("编辑成功！"),t.$router.back()}):this.$message.warning("请输入所属城市！"):this.$message.warning("医院名称不能为空！")}else this.$alert("请上传图片，或取消图片上传！","提示",{type:"warning"})},defaultImage:function(){this.hospital.image="/u/cms/www/logo/cd169571-719f-4547-a99c-b45550d64978.png",this.isDefualt=!0},resetDefault:function(){this.hospital.image=this.defaultUrl,this.isDefualt=!1},changeImage:function(){this.hospital.image="",this.isShow=!0},reset:function(){this.isShow=!1,this.hospital.image=this.defaultUrl}},created:function(){this.getHospitalInfo()},components:{BackBtn:dt,FastSelect:ee}},le={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-section"},[a("div",{staticClass:"setting-title"},[a("div",{staticClass:"flexbox-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{name:"hospital"}}},[t._v("协同医院")]),t._v(" "),a("el-breadcrumb-item",[t._v("编辑信息")]),t._v(" "),a("el-breadcrumb-item",[t._v(t._s(t.hospital.name))])],1),t._v(" "),a("back-btn",[t._v("返回")])],1)]),t._v(" "),a("div",{staticClass:"setting-content"},[a("el-form",{ref:"news",attrs:{model:t.hospital,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"医院图标"}},[t.isShow?a("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:t.actions,headers:t.headers,"on-success":t.onSuccess,data:t.data,name:"image","list-type":"picture-card","on-remove":t.handleRemove}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("p",{staticClass:"small-text",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[a("span",[t._v("* 图片尺寸 148*127")]),t._v(" "),a("el-button",{staticClass:"ml-sm",attrs:{slot:"tip",type:"text",size:"small"},on:{click:t.reset},slot:"tip"},[t._v("取消")])],1)]):a("div",{staticClass:"imgDiv"},[a("img",{attrs:{src:t.baseUrl+t.hospital.image,alt:""}}),t._v(" "),t.isDefualt?a("el-button",{attrs:{type:"text",size:"small"},on:{click:t.resetDefault}},[t._v("恢复")]):a("el-button",{attrs:{type:"text",size:"small"},on:{click:t.defaultImage}},[t._v("默认图标")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:t.changeImage}},[t._v("更换")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"医院名称"}},[a("el-input",{attrs:{type:"text",size:"mini",placeholder:"郑州大学第一附属医院"},model:{value:t.hospital.name,callback:function(e){t.$set(t.hospital,"name",e)},expression:"hospital.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"医院英文名称"}},[a("el-input",{attrs:{type:"text",size:"mini",placeholder:"The First Affiliated Hospital of Zhengzhou University"},model:{value:t.hospital.nameEn,callback:function(e){t.$set(t.hospital,"nameEn",e)},expression:"hospital.nameEn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"首页地址"}},[a("el-input",{attrs:{type:"text",size:"mini",placeholder:"http://www.htcc.org.cn/"},model:{value:t.hospital.url,callback:function(e){t.$set(t.hospital,"url",e)},expression:"hospital.url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属城市"}},[t.hospital.addressId?a("fast-select",{attrs:{id:t.hospital.addressId},on:{fastSelect:t.getSelected}}):t._e(),t._v(" "),a("div",{staticClass:"input-col-2"},[a("el-input",{attrs:{type:"text",size:"mini",placeholder:"郑州"},model:{value:t.hospital.addressName,callback:function(e){t.$set(t.hospital,"addressName",e)},expression:"hospital.addressName"}}),t._v(" "),a("el-input",{attrs:{type:"text",size:"mini",placeholder:"Zhengzhou"},model:{value:t.hospital.addressNameEn,callback:function(e){t.$set(t.hospital,"addressNameEn",e)},expression:"hospital.addressNameEn"}})],1),t._v(" "),a("span",{staticClass:"tips"},[t._v("* 快速选择中，城市对应的英文若有错误，可以手动更改后提交以修正记录！")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.edit}},[t._v("立即更新")])],1)],1)],1)])},staticRenderFns:[]};var oe=a("C7Lr")(ne,le,!1,function(t){a("UFCJ")},"data-v-7d10e46a",null).exports,re={name:"customization",data:function(){return{dialogVisible:!1,tips:"",baseUrl:"http://htcc.org.cn",show:!0,lists:[{id:1,name:"首页",link:"",children:[{id:11,url:"/static/images/bg.png",label:"背景",tip:"1920 * 1080"},{id:12,url:"/static/images/logo.png",label:"Logo",tip:"240 * 240"},{id:13,url:"/static/images/logo-en.png",label:"Logo - 英文版",tip:"240 * 240"}]},{id:2,name:"综合服务平台",link:"/page/telem-colla.html",children:[{id:21,url:"/static/images/s-bg.png",label:"背景",tip:"1920 * 1080"},{id:22,url:"/static/images/s-logo-en.png",label:"Logo",tip:"350 * 60"},{id:22,url:"/static/images/s-logo-en.png",label:"Logo - 英文版",tip:"350 * 60"}]},{id:3,name:"官网首页",link:"/page/main.html",children:[{id:31,url:"/static/images/main-logo.png",label:"Logo",tip:"270 * 70"},{id:31,url:"/static/images/main-logo-en.png",label:"Logo - 英文版",tip:"270 * 70"},{id:32,url:"/static/images/lib.png",label:"电子图书馆背景",tip:"1920 * 160"},{id:33,url:"/static/images/info.png",label:"行业资讯配图",tip:"570 * 445"}]},{id:4,name:"关于我们",link:"/page/about/overview.html",children:[{id:41,url:"/static/images/sub/about-bg.png",label:"Header 背景图",tip:"1920 * 240"}]},{id:5,name:"新闻中心",link:"/page/news/notice.html",children:[{id:51,url:"/static/images/sub/news-bg.png",label:"Header 背景图",tip:"1920 * 240"}]},{id:6,name:"科研中心",link:"/page/research/orgs.html",children:[{id:61,url:"/static/images/ky/bg.png",label:"Header 背景图",tip:"1920 * 240"},{id:62,url:"/static/images/ky/org-1.png",label:"科研机构 - 研究中心",tip:"1000 * 280"},{id:63,url:"/static/images/ky/org-2.png",label:"科研机构 - 实验室",tip:"1000 * 280"},{id:64,url:"/static/images/ky/team-1.png",label:"科研团队 - 研究生培养",tip:"420 * 280"},{id:65,url:"/static/images/ky/team-2.png",label:"科研团队 - 学习技术骨干",tip:"420 * 280"},{id:66,url:"/static/images/ky/team-3.png",label:"科研团队 - 科研团队",tip:"420 * 280"},{id:67,url:"/static/images/ky/team-4.png",label:"科研团队 - 学科带头人",tip:"420 * 280"},{id:68,url:"/static/images/ky/rs-1.png",label:"项目成果 - 科研成果",tip:"1000 * 280"},{id:69,url:"/static/images/ky/rs-2.png",label:"项目成果 - 科研项目",tip:"1000 * 280"}]},{id:7,name:"加盟中心",link:"/page/join/condition.html",children:[{id:71,url:"/static/images/sub/join-bg.png",label:"Header 背景图",tip:"1920 * 240"}]}],currentImgUrl:"",currentPath:""}},methods:{uploadFunc:function(t){var e=this;if(!(t.file.size/1024/1024<10))return this.$message.error("文件大小超过限制(10M)!"),void this.$refs.upload.clearFiles();var a=t.file,i=this.currentPath,s=new FormData;s.append("path",i),s.append("picture",a),X(s).then(function(t){"200"===t.data.status?(e.$message.success(t.data.msg),e.dialogVisible=!1,e.show=!1,e.show=!0):(e.$message.warning(t.data.msg),e.$refs.upload.clearFiles())})},openUploadDialog:function(t,e){this.tips=e,this.currentPath=t,this.dialogVisible=!0},upload:function(){this.$refs.upload.submit()},open:function(t){this.currentImgUrl=t,this.$refs.dialog.style.display="block"},close:function(){this.currentImgUrl="",this.$refs.dialog.style.display="none"}},created:function(){}},ce={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"setting-section"},[t._m(0),t._v(" "),a("div",{staticClass:"setting-content"},[t._l(t.lists,function(e){return a("div",{key:e.id},[a("h3",{staticClass:"title"},[t._v(t._s(e.name)+"\n        "),a("a",{staticClass:"location",attrs:{href:t.baseUrl+e.link,target:"_blanck"}},[a("i",{staticClass:"el-icon-location-outline info"}),t._v(" "),a("span",{staticClass:"info"},[t._v("点击进入 ")])])]),t._v(" "),a("el-row",{staticClass:"pt-md"},t._l(e.children,function(e){return a("el-col",{key:e.id,staticStyle:{padding:"0 10px"},attrs:{xs:24,sm:12,md:8,lg:6}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"img",attrs:{src:t.baseUrl+e.url}}),t._v(" "),a("div",{staticClass:"content flexbox-between"},[a("span",{staticClass:"fb"},[t._v(t._s(e.label))]),t._v(" "),a("el-button",{staticClass:"button p-none",attrs:{type:"text",size:"medium"},on:{click:function(a){t.openUploadDialog(e.url,e.tip)}}},[t._v("更换图片")])],1),t._v(" "),a("div",{staticClass:"mask",on:{click:function(a){t.open(e.url)}}},[a("span",{staticClass:"mask-tip"},[t._v("点击查看大图")])])])],1)}))],1)}),t._v(" "),a("el-dialog",{attrs:{title:"上传图片",visible:t.dialogVisible,width:"480px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-upload",{ref:"upload",staticClass:"upload",attrs:{drag:"",action:"string","auto-upload":!1,"http-request":t.uploadFunc}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("span",{staticStyle:{color:"red","line-height":"2"}},[t._v("* 分辨率："+t._s(t.tips)+"，需上传比例相同且不小于此分辨率的图片")]),a("br"),t._v(" "),a("span",{staticStyle:{color:"red","line-height":"2"}},[t._v("* 图片上传成功时，立即生效 (若无效请手动刷新缓存) *")])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.upload}},[t._v("上 传")])],1)],1)],2),t._v(" "),a("div",{ref:"dialog",staticClass:"viewImg"},[a("img",{attrs:{src:t.baseUrl+t.currentImgUrl,alt:""}}),t._v(" "),a("div",{staticClass:"close",on:{click:t.close}})])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"setting-title"},[e("span",[this._v("静态图片自定义")])])}]};var ue=a("C7Lr")(re,ce,!1,function(t){a("FBB4")},"data-v-42b51b36",null).exports;k.default.use(T.a);var de=new T.a({routes:[{path:"/",name:"main",component:j,redirect:"/dashboard",children:[{path:"/dashboard",name:"dashboard",component:W},{path:"static",name:"static",component:ct},{path:"static/edit/:id",name:"static-edit",component:zt},{path:"news",name:"news",component:Dt},{path:"news/create",name:"news-create",component:At},{path:"news/edit/:id",name:"news-edit",component:Rt},{path:"links",name:"links",component:Bt},{path:"hospital",name:"hospital",component:Qt},{path:"hospital/create",name:"hospital-create",component:se},{path:"hospital/edit/:id",name:"hospital-edit",component:oe},{path:"customization",name:"customization",component:ue}]},{path:"/login",name:"login",component:U},{path:"*",direct:"/news"}]});de.beforeEach(function(t,e,a){return m.token?(v(m.token),"/login"===t.path?a(e.path):a()):(m.clear(),"/login"!==t.path?a("/login"):a())});var pe=de;N.a.register("modules/imageDrop",E.a),N.a.register("modules/imageResize",L.a),k.default.use(w.a,{size:"small"}),k.default.use(x.a,{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{color:[]},{background:[]}],[{align:[]}],[{clean:"表格"}],["link","image","video"]],history:{delay:1e3,maxStack:50,userOnly:!1},imageDrop:!0,imageResize:{displayStyles:{backgroundColor:"black",border:"none",color:"white"},modules:["Resize","DisplaySize","Toolbar"]}}}),k.default.config.productionTip=!1,new k.default({el:"#app",router:pe,components:{App:D},template:"<App/>"})},"NQ/I":function(t,e){},QTam:function(t,e){},UAGZ:function(t,e){},UFCJ:function(t,e){},YmYC:function(t,e){},ZYO2:function(t,e){},"dC+V":function(t,e){},h8no:function(t,e){},hJXt:function(t,e){},lMgl:function(t,e){},m7aY:function(t,e){},nKow:function(t,e){},nxpn:function(t,e){},qcnN:function(t,e){},tqWA:function(t,e){},u176:function(t,e){},xyiZ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.70d6328896a98a750c44.js.map